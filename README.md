# pc-toolbox

Note: Version: 2.0 implements `pc_lib_api` as a PrismaCloudAPI class/instance. 
Refer to `pc-script-example.py` for an example of how to use it.

## Prisma Cloud API Scripts

These scripts are written in Python (2.7 originally, updated and tested in Python 3.x, but both should still work).
If you need to install Python, you can get more information at [Python's Page](https://www.python.org/) and you will also need [PIP](https://pypi.python.org/pypi/pip). 

To set up your Python environment, you will need the following packages:

- requests

To install or check for these packages:

```
pip install requests --upgrade
```

## Support

These scripts have been developed by Prisma Cloud SEs to provide additionality to Prisma Cloud.
They are not Supported by Palo Alto Networks, but the maintainers will make a best-effort to address issues; and (of course) contributors are encouraged to submit pull requests.

## Documented Scripts

Each of the scripts requires the `pc_api_lib.py` and `pc_lib_general.py` library files to be in the same directory as the scripts themselves.

**pc-configure.py**

Use `pc-configure.py` to save a Prisma Cloud Access Key, Secret Key, and API/UI Base URL in a file for use by the other scripts.

- `-u / --username` (REQUIRED) Access Key generated by your Prisma Cloud User
- `-p / --password` (REQUIRED) Secret Key generated by your Prisma Cloud User
- `-url / --uiurl` (REQUIRED) Prisma Cloud API/UI Base URL used to access Prisma Cloud (`app*.prismacloud.*` ... or you can specify a direct `api*.prismacloud.*` URL). 
- `-conf_file / --config_file` (OPTIONAL) File containing your Prisma Cloud API configuration settings. Default: pc-settings.conf

Run `pc-configure.py` without any options to inspect the default configuration file, if it exists.

NOTE: Settings are stored in a cleartext JSON file, by default in the same directory as the scripts.

Example:

```
python pc-configure.py --username "example access key" --password "example secret key" --uiurl "app.prismacloud.io"
```

**pc-policy-status.py**

Use this to enable or disable Policies globally for an account (filtered on Policy Type or Compliance Standard).
This is primarily for setting up a new environment with everything Policy enabled, or to update an environment after a large number of new Policies have been released.

Example:

```
python pc-policy-status.py --policy_type config enable
```

This can also be used to enable Policies that are associated with a specific Compliance Standard (or Compliance Standards).

Example:

```
python pc-policy-status.py --policy_type all disable
python pc-policy-status.py --compliance_standard "GDPR" enable
python pc-policy-status.py --compliance_standard "SOC 2" enable
```

**pc-user-import.py**

Use this to import a list of Users from a CSV file.
It will check for duplicates before importing.

Example:

```
python pc-user-import.py "example.csv" "Prisma Cloud User Role Name"
```

**pc-compliance-export.py**

Use this to export an existing Compliance Standard (and its Requirements and Sections) to a file for import later, into the same or another tenant.

Example:

```
python pc-compliance-export.py "SOC 2" "soc2.json"
```

**pc-compliance-import.py**

Use this to import an exported Compliance Standard (and its Requirements and Sections) into a new Compliance Standard.
To import the same Policy mappings, specify the `--policy` switch. 
This only supports default Policies (custom Policies in progress).
It will check for duplicates before importing.

Example:

```
python pc-compliance-import.py "soc2.json" "SOC 2 Imported" --policy
```

**pc-cloud-account-import-azure.py (in progress)**

This is the framework for importing a CSV (template in the `templates` directory) with a list of Azure accounts into Prisma Cloud.
Note: This is still a work in progress. Basic import framework is running, but validation of CSV and duplicate name checking has not been implemented yet.

Example:

```
python pc-cloud-account-import-azure.py prisma_cloud_account_import_azure_template.csv
```
